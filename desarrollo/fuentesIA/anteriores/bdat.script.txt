SET DATABASE UNIQUE NAME HSQLDB9A0AA171B1
SET DATABASE DEFAULT RESULT MEMORY ROWS 0
SET DATABASE EVENT LOG LEVEL 0
SET DATABASE TRANSACTION CONTROL LOCKS
SET DATABASE DEFAULT ISOLATION LEVEL READ COMMITTED
SET DATABASE TRANSACTION ROLLBACK ON CONFLICT TRUE
SET DATABASE TEXT TABLE DEFAULTS ''
SET DATABASE SQL NAMES FALSE
SET DATABASE SQL RESTRICT EXEC FALSE
SET DATABASE SQL REFERENCES FALSE
SET DATABASE SQL SIZE TRUE
SET DATABASE SQL TYPES FALSE
SET DATABASE SQL TDC DELETE TRUE
SET DATABASE SQL TDC UPDATE TRUE
SET DATABASE SQL SYS INDEX NAMES TRUE
SET DATABASE SQL CONCAT NULLS TRUE
SET DATABASE SQL UNIQUE NULLS TRUE
SET DATABASE SQL CONVERT TRUNCATE TRUE
SET DATABASE SQL AVG SCALE 0
SET DATABASE SQL DOUBLE NAN TRUE
SET FILES WRITE DELAY 500 MILLIS
SET FILES BACKUP INCREMENT TRUE
SET FILES CACHE SIZE 10000
SET FILES CACHE ROWS 50000
SET FILES SCALE 32
SET FILES LOB SCALE 32
SET FILES DEFRAG 0
SET FILES NIO TRUE
SET FILES NIO SIZE 256
SET FILES LOG TRUE
SET FILES LOG SIZE 50
SET FILES CHECK 10057
SET DATABASE COLLATION "SQL_TEXT" PAD SPACE
CREATE USER SA PASSWORD DIGEST 'c596f9df041ce0836ddaa0d023159580'
CREATE USER TRAMITADOR PASSWORD DIGEST 'd41d8cd98f00b204e9800998ecf8427e'
CREATE USER SUPERVISOR PASSWORD DIGEST '82a3f212c95c1516907f27e1220c6f13'
CREATE SCHEMA PUBLIC AUTHORIZATION DBA
CREATE SCHEMA T AUTHORIZATION SA
CREATE MEMORY TABLE T.EXPEDIENTES(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,NUMERO_AT INTEGER NOT NULL,RESPONSABLE_ID INTEGER DEFAULT 0 NOT NULL,TIPO_EXPEDIENTE_ID INTEGER,HEREDADO BOOLEAN,CONSTRAINT EXPEDIENTES_PK PRIMARY KEY(ID))
ALTER TABLE T.EXPEDIENTES ALTER COLUMN ID RESTART WITH 0
CREATE MEMORY TABLE T.USUARIOS(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,SIGLAS VARCHAR(50) DEFAULT 'NULO' NOT NULL,NOMBRE VARCHAR(100) DEFAULT 'Usuario' NOT NULL,APELLIDO1 VARCHAR(50) DEFAULT 'no asignado' NOT NULL,APELLIDO2 VARCHAR(50),ACTIVO BOOLEAN DEFAULT TRUE,CONSTRAINT USUARIOS_PK PRIMARY KEY(ID))
ALTER TABLE T.USUARIOS ALTER COLUMN ID RESTART WITH 2
CREATE MEMORY TABLE T.SOLICITUDES(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,TIPO_SOLICITUD_ID INTEGER DEFAULT 0 NOT NULL,FECHA DATE,PROYECTO_ID INTEGER DEFAULT 0 NOT NULL,SOLICITUD_AFECTADA_ID INTEGER DEFAULT NULL,FECHA_FIN DATE,CONSTRAINT SOLICITUDES_PK PRIMARY KEY(ID),CONSTRAINT SOLICITUDES_SOLICITUDES_FK FOREIGN KEY(SOLICITUD_AFECTADA_ID) REFERENCES T.SOLICITUDES(ID))
ALTER TABLE T.SOLICITUDES ALTER COLUMN ID RESTART WITH 0
CREATE MEMORY TABLE T.PROYECTOS(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,EXPEDIENTE_ID INTEGER NOT NULL,TITULO VARCHAR(500) DEFAULT '\u26a0\ufe0f Falta el t\u00edtulo del proyecto' NOT NULL,DESCRIPCION VARCHAR(10000) DEFAULT '\u26a0\ufe0f Falta la descripci\u00f3n del proyecto' NOT NULL,TIPO_PROYECTO_ID INTEGER DEFAULT 0 NOT NULL,FECHA DATE NOT NULL,FINALIDAD VARCHAR(500) DEFAULT '\u26a0\ufe0f Falta la finalidad del proyecto' NOT NULL,EMPLAZAMIENTO VARCHAR(200) DEFAULT '\u26a0\ufe0f Falta el emplazamiento' NOT NULL,IA_ID INTEGER DEFAULT 4,CONSTRAINT PROYECTOS_PK PRIMARY KEY(ID),CONSTRAINT PROYECTOS_EXPEDIENTES_FK FOREIGN KEY(EXPEDIENTE_ID) REFERENCES T.EXPEDIENTES(ID))
ALTER TABLE T.PROYECTOS ALTER COLUMN ID RESTART WITH 0
CREATE MEMORY TABLE T.TIPOS_PROYECTOS(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,TIPO VARCHAR(100) NOT NULL,CONSTRAINT TIPOS_PROYECTOS_PK PRIMARY KEY(ID))
ALTER TABLE T.TIPOS_PROYECTOS ALTER COLUMN ID RESTART WITH 3
CREATE MEMORY TABLE T.TIPOS_EXPEDIENTES(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,TIPO VARCHAR(100),DESCRIPCION VARCHAR(200),CONSTRAINT TIPOS_EXPEDIENTES_PK PRIMARY KEY(ID))
ALTER TABLE T.TIPOS_EXPEDIENTES ALTER COLUMN ID RESTART WITH 9
CREATE MEMORY TABLE T.TIPOS_SOLICITUDES(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,SIGLAS VARCHAR(100),DESCRIPCION VARCHAR(200),CONSTRAINT TIPOS_SOLICITUDES_PK PRIMARY KEY(ID))
ALTER TABLE T.TIPOS_SOLICITUDES ALTER COLUMN ID RESTART WITH 20
CREATE MEMORY TABLE T.MUNICIPIOS(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,NOMBRE VARCHAR(100),CONSTRAINT MUNICIPIOS_PK PRIMARY KEY(ID))
ALTER TABLE T.MUNICIPIOS ALTER COLUMN ID RESTART WITH 45
CREATE MEMORY TABLE T.MUNICIPIOS_PROYECTO(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,MUNICIPIO_ID INTEGER NOT NULL,PROYECTO_ID INTEGER NOT NULL,CONSTRAINT MUNICIPIOS_PROYECTO_PK PRIMARY KEY(ID),CONSTRAINT MUNICIPIOS_PROYECTO_MUNICIPIOS_FK FOREIGN KEY(MUNICIPIO_ID) REFERENCES T.MUNICIPIOS(ID),CONSTRAINT MUNICIPIOS_PROYECTO_PROYECTOS_FK FOREIGN KEY(PROYECTO_ID) REFERENCES T.PROYECTOS(ID))
ALTER TABLE T.MUNICIPIOS_PROYECTO ALTER COLUMN ID RESTART WITH 0
CREATE MEMORY TABLE T.TIPOS_FASES(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,CODIGO VARCHAR(50) NOT NULL,NOMBRE VARCHAR(200) NOT NULL,CONSTRAINT TIPOS_FASES_PK PRIMARY KEY(ID),CONSTRAINT TIPOS_FASES_CODIGO_UK UNIQUE(CODIGO))
ALTER TABLE T.TIPOS_FASES ALTER COLUMN ID RESTART WITH 13
CREATE MEMORY TABLE T.FASES(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,SOLICITUD_ID INTEGER NOT NULL,TIPO_FASE_ID INTEGER NOT NULL,FECHA_INICIO DATE,FECHA_FIN DATE,OBSERVACIONES VARCHAR(2000),RESULTADO_FASE_ID INTEGER,DOCUMENTO_RESULTADO_ID INTEGER,CONSTRAINT FASES_PK PRIMARY KEY(ID),CONSTRAINT FASES_SOLICITUDES_FK FOREIGN KEY(SOLICITUD_ID) REFERENCES T.SOLICITUDES(ID),CONSTRAINT FASES_TIPOS_FASES_FK FOREIGN KEY(TIPO_FASE_ID) REFERENCES T.TIPOS_FASES(ID))
ALTER TABLE T.FASES ALTER COLUMN ID RESTART WITH 0
CREATE MEMORY TABLE T.TIPOS_IA(ID INTEGER PRIMARY KEY,SIGLAS VARCHAR(10) NOT NULL,DESCRIPCION VARCHAR(100) NOT NULL)
CREATE MEMORY TABLE T.TIPOS_TRAMITES(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,CODIGO VARCHAR(50) NOT NULL,NOMBRE VARCHAR(200) NOT NULL,DESCRIPCION VARCHAR(500),TABLA_EXTENSION VARCHAR(100) NOT NULL,CONSTRAINT TIPOS_TRAMITES_PK PRIMARY KEY(ID),CONSTRAINT TIPOS_TRAMITES_CODIGO_UK UNIQUE(CODIGO))
ALTER TABLE T.TIPOS_TRAMITES ALTER COLUMN ID RESTART WITH 0
CREATE MEMORY TABLE T.TRAMITES(ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0) NOT NULL,FASE_ID INTEGER NOT NULL,TIPO_TRAMITE_ID INTEGER NOT NULL,FECHA_INICIO DATE,FECHA_FIN DATE,OBSERVACIONES VARCHAR(2000),CONSTRAINT TRAMITES_PK PRIMARY KEY(ID),CONSTRAINT TRAMITES_FASES_FK FOREIGN KEY(FASE_ID) REFERENCES T.FASES(ID) ON DELETE CASCADE,CONSTRAINT TRAMITES_TIPOS_TRAMITES_FK FOREIGN KEY(TIPO_TRAMITE_ID) REFERENCES T.TIPOS_TRAMITES(ID))
ALTER TABLE T.TRAMITES ALTER COLUMN ID RESTART WITH 0
ALTER TABLE T.EXPEDIENTES ADD CONSTRAINT EXPEDIENTES_USUARIOS_FK FOREIGN KEY(RESPONSABLE_ID) REFERENCES T.USUARIOS(ID)
ALTER TABLE T.EXPEDIENTES ADD CONSTRAINT EXPEDIENTES_TIPOS_EXPEDIENTES_FK FOREIGN KEY(TIPO_EXPEDIENTE_ID) REFERENCES T.TIPOS_EXPEDIENTES(ID)
ALTER TABLE T.SOLICITUDES ADD CONSTRAINT SOLICITUDES_PROYECTOS_FK FOREIGN KEY(PROYECTO_ID) REFERENCES T.PROYECTOS(ID)
ALTER TABLE T.SOLICITUDES ADD CONSTRAINT SOLICITUDES_TIPOS_SOLICITUDES_FK FOREIGN KEY(TIPO_SOLICITUD_ID) REFERENCES T.TIPOS_SOLICITUDES(ID)
ALTER TABLE T.PROYECTOS ADD CONSTRAINT PROYECTOS_TIPOS_PROYECTOS_FK FOREIGN KEY(TIPO_PROYECTO_ID) REFERENCES T.TIPOS_PROYECTOS(ID)
ALTER TABLE T.PROYECTOS ADD CONSTRAINT PROYECTOS_TIPOS_IA_FK FOREIGN KEY(IA_ID) REFERENCES T.TIPOS_IA(ID)
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 1
SET DATABASE DEFAULT INITIAL SCHEMA PUBLIC
GRANT USAGE ON DOMAIN INFORMATION_SCHEMA.CARDINAL_NUMBER TO PUBLIC
GRANT USAGE ON DOMAIN INFORMATION_SCHEMA.YES_OR_NO TO PUBLIC
GRANT USAGE ON DOMAIN INFORMATION_SCHEMA.CHARACTER_DATA TO PUBLIC
GRANT USAGE ON DOMAIN INFORMATION_SCHEMA.SQL_IDENTIFIER TO PUBLIC
GRANT USAGE ON DOMAIN INFORMATION_SCHEMA.TIME_STAMP TO PUBLIC
GRANT DBA TO SA
GRANT SELECT ON TABLE T.TIPOS_SOLICITUDES TO TRAMITADOR
GRANT ALL ON TABLE T.PROYECTOS TO TRAMITADOR
GRANT SELECT ON TABLE T.TIPOS_TRAMITES TO TRAMITADOR
GRANT ALL ON TABLE T.MUNICIPIOS_PROYECTO TO TRAMITADOR
GRANT ALL ON TABLE T.EXPEDIENTES TO TRAMITADOR
GRANT SELECT ON TABLE T.USUARIOS TO TRAMITADOR
GRANT SELECT ON TABLE T.TIPOS_EXPEDIENTES TO TRAMITADOR
GRANT SELECT ON TABLE T.TIPOS_IA TO TRAMITADOR
GRANT ALL ON TABLE T.TRAMITES TO TRAMITADOR
GRANT SELECT ON TABLE T.TIPOS_FASES TO TRAMITADOR
GRANT SELECT ON TABLE T.MUNICIPIOS TO TRAMITADOR
GRANT SELECT ON TABLE T.TIPOS_PROYECTOS TO TRAMITADOR
GRANT ALL ON TABLE T.FASES TO TRAMITADOR
GRANT ALL ON TABLE T.SOLICITUDES TO TRAMITADOR
GRANT ALL ON TABLE T.TIPOS_SOLICITUDES TO SUPERVISOR
GRANT ALL ON TABLE T.PROYECTOS TO SUPERVISOR
GRANT ALL ON TABLE T.TIPOS_TRAMITES TO SUPERVISOR
GRANT ALL ON TABLE T.MUNICIPIOS_PROYECTO TO SUPERVISOR
GRANT ALL ON TABLE T.EXPEDIENTES TO SUPERVISOR
GRANT ALL ON TABLE T.USUARIOS TO SUPERVISOR
GRANT ALL ON TABLE T.TIPOS_EXPEDIENTES TO SUPERVISOR
GRANT ALL ON TABLE T.TIPOS_IA TO SUPERVISOR
GRANT ALL ON TABLE T.TRAMITES TO SUPERVISOR
GRANT ALL ON TABLE T.TIPOS_FASES TO SUPERVISOR
GRANT ALL ON TABLE T.MUNICIPIOS TO SUPERVISOR
GRANT ALL ON TABLE T.TIPOS_PROYECTOS TO SUPERVISOR
GRANT ALL ON TABLE T.FASES TO SUPERVISOR
GRANT ALL ON TABLE T.SOLICITUDES TO SUPERVISOR
SET SCHEMA SYSTEM_LOBS
SET SCHEMA T
