<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 7.6.7.2 (Windows)"/>
	<meta name="author" content="Carlos López González"/>
	<meta name="created" content="2025-10-21T05:37:38.584000000"/>
	<meta name="changedby" content="Carlos López González"/>
	<meta name="changed" content="2025-11-16T09:16:10.329000000"/>
	<style type="text/css">
		@page { size: 21cm 29.7cm; margin: 2cm }
		p { line-height: 115%; margin-bottom: 0.25cm; background: transparent }
		p.lista-western { font-family: "Source Sans Pro", sans-serif }
		p.lista-cjk { font-size: 12pt }
		p.lista-ctl { font-family: "Arial Unicode MS", sans-serif }
		h1 { margin-bottom: 0.21cm; background: transparent; page-break-after: avoid }
		h1.western { font-family: "Source Sans Pro", sans-serif; font-size: 18pt; font-weight: bold }
		h1.cjk { font-family: "Microsoft YaHei"; font-size: 18pt; font-weight: bold }
		h1.ctl { font-family: "Arial Unicode MS"; font-size: 18pt; font-weight: bold }
		h2 { margin-top: 0.35cm; margin-bottom: 0.21cm; background: transparent; page-break-after: avoid }
		h2.western { font-family: "Source Sans Pro", sans-serif; font-size: 16pt; font-weight: bold }
		h2.cjk { font-family: "Microsoft YaHei"; font-size: 16pt; font-weight: bold }
		h2.ctl { font-family: "Arial Unicode MS"; font-size: 16pt; font-weight: bold }
		h3 { margin-top: 0.25cm; margin-bottom: 0.21cm; background: transparent; page-break-after: avoid }
		h3.western { font-family: "Source Sans Pro", sans-serif; font-size: 14pt; font-weight: bold }
		h3.cjk { font-family: "Microsoft YaHei"; font-size: 14pt; font-weight: bold }
		h3.ctl { font-family: "Arial Unicode MS"; font-size: 14pt; font-weight: bold }
		td p { orphans: 0; widows: 0; background: transparent }
		pre { background: transparent }
		pre.western { font-family: "Liberation Mono", monospace; font-size: 10pt }
		pre.cjk { font-family: "NSimSun", monospace; font-size: 10pt }
		pre.ctl { font-family: "Liberation Mono", monospace; font-size: 10pt }
		th p { font-weight: bold; text-align: center; orphans: 0; widows: 0; background: transparent }
		h4 { margin-top: 0.21cm; margin-bottom: 0.21cm; background: transparent; page-break-after: avoid }
		h4.western { font-family: "Source Sans Pro", sans-serif; font-size: 13pt; font-style: italic; font-weight: bold }
		h4.cjk { font-family: "Microsoft YaHei"; font-size: 13pt; font-style: italic; font-weight: bold }
		h4.ctl { font-family: "Arial Unicode MS"; font-size: 13pt; font-style: italic; font-weight: bold }
		a:link { color: #000080; text-decoration: underline }
		code.western { font-family: "Liberation Mono", monospace }
		code.cjk { font-family: "NSimSun", monospace }
		code.ctl { font-family: "Liberation Mono", monospace }
		strong { font-weight: bold }
	</style>
</head>
<body lang="es-ES" link="#000080" vlink="#800000" dir="ltr"><h1 class="western">
PROYECTO BDDATLIBRE</h1>
<h2 class="western">Propósito</h2>
<p align="justify">El propósito de este proyecto es desarrollar una
base de datos y un interfaz para gestionar tramitaciones de
expedientes de solicitudes de instalaciones de alta tensión. 
</p>
<p align="justify">El proyecto tiene dos retos principales. Uno el
desarrollo técnico de la base de datos y el interfaz y dos la
definición de la lógica de negocio de la tramitación de
expedientes. 
</p>
<h2 class="western">Desarrollo de la base de datos</h2>
<p align="justify">En el desarrollo de la base de datos vamos a
enfrentarnos a la organización de la información, así como la
necesidad de concurrencia de los usuarios. Para la organización de
la información se ha estudiado la lógica del proceso de tramitación
de expedientes, y la relación entre la información que se maneja.
De esta forma, la estructura de la base de datos está relacionada
con la forma de tramitación de los expedientes. Primero analizaremos
las claves desde el punto de vista técnico, de implementación,
conociendo las necesidades del entorno en el que vamos a desarrollar.</p>
<h3 class="western">Claves técnicas</h3>
<ul>
	<li><p class="lista-western" align="justify"><b>Entorno</b>:
	usuarios con Windows 11(máximo 15) en red, con servidor de archivos
	mantenido por el entorno empresarial.</p></li>
	<li><p class="lista-western" align="justify"><b>Base de datos</b>:
	HSLQDB en servidor. EL servidor se ejecuta inicialmente en el PC de
	un usuario en red y los clientes son otros usuarios en red. La base
	de datos y otros archivos se alojan en el servidor de red. Se
	pretende que en el futuro el servidor de bases de datos se ejecute
	en el servidor central. Contiene las tablas y consultas necesarias.</p></li>
	<li><p class="lista-western" align="justify"><b>Interfaz de cliente</b>:
	Documento LibreOffice Base conectado a la base de datos externa.
	Contiene los formularios y macros. Las macros son importadas de solo
	lectura desde un almacén en el servidor central. Eventualmente
	podría tener consultas creadas por el propio usuario pero alojadas
	en el propio documento, no en el servidor. 
	</p></li>
	<li><p class="lista-western"><b>Estructura de ficheros</b>: cada
	usuario tiene una unidad W que apunta a un directorio del servidor.
	Se garantiza lectura y escritura completa a cada usuario. La unidad
	se monta automáticamente en cada PC.</p></li>
	<li><p class="lista-western"><b>Desarrollo</b>: se estructura la
	base de datos , se programan las macros y diseñan los formularios
	en el directorio /desarrollo y luego para poner en producción hay
	que dar una serie de pasos que tenemos que definir más adelante.</p></li>
	<li><p class="lista-western"><b>Soporte</b>: Para recibir soporte
	por parte de la IA para desarrollar la base de datos y su
	infraestructura, hay que proporcionarle una conjunto de ficheros a
	la misma. Se ubicarán en desarrollo/fuentesIA.</p></li>
</ul>
<h3 class="western">Control de versiones 
</h3>
<p>El proyecto utiliza Git para control de versiones. Se hacen
commits de los archivos principales cuando se consolidan cambios
importantes. Esto permite: 
</p>
<ul>
	<li><p>Volver a versiones anteriores si algo falla</p></li>
	<li><p>Tener historial de evolución del proyecto</p></li>
	<li><p>Trabajar de forma segura en desarrollo sin miedo a perder
	trabajo</p></li>
</ul>
<p>Los archivos bajo control de versiones incluyen: 
</p>
<ul>
	<li><p>Base de datos de desarrollo (bdat.script, bdat.properties)</p></li>
	<li><p>Interfaces .odb de desarrollo</p></li>
	<li><p>Macros (.xml)</p></li>
	<li><p>Scripts de utilidades (.py, .bat)</p></li>
	<li><p>Documentación (.md, .odt)</p></li>
	<li><p>Archivos fuente IA (JSON, XML, SQL, TXT) 
	</p></li>
</ul>
<h3 class="western">Estructura de ficheros</h3>
<p>La estructura de ficheros parte de una ruta fija y tiene estos
directorios:</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<pre class="western">W:\BDDATLIBRE
│
├───bdat
│
├───desarrollo
│   ├───bdat
│   ├───documentos
│   ├───fuentesIA
│   ├───interfaz
│   ├───macros
│   ├───plantillas
│   └───utilidades
│
├───preproduccion
│   ├───bdat
│   └───utilidades
│
├───documentos
│
├───hslqdb
│
├───interfaz
│   ├───supervisor
│   └───tramitador
│
├───macros
│
├───plantillas
│
└───utilidades</pre><p style="line-height: 100%; margin-bottom: 0cm">
<br/>

</p>
<table width="100%" cellpadding="4" cellspacing="0">
	<col width="60*"/>
	<col width="196*"/>
	<tr valign="top">
		<td width="24%" style="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0.1cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			<b>DIRECTORIO</b></p>
		</td>
		<td width="76%" style="border: 1px solid #000000; padding: 0.1cm"><p>
			<b>EXPLICACIÓN</b></p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			bdat</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Aloja los ficheros .script y .properties de la base de datos</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			desarrollo 
			</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Dispone todos los directorios necesarios para desarrollar la base
			de datos</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			desarrollo/bdat 
			</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Base de datos en desarrollo</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			desarrollo/documentos</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Contiene los documentos para el desarrollador y para pasarlos a la
			IA</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			desarrollo/fuentesIA 
			</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Contiene los documentos necesarios para darle información a la
			IA, por ejemplo este documento en formato MarkDown.</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			desarrollo/interfaz 
			</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Documentos .odb de desarrollo</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			desarrollo/macros 
			</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Macros de desarrollo para formularios.</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			desarrollo/plantillas 
			</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Plantillas .ott de desarrollo</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			desarrollo/utilidades 
			</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Scripts utiles (bat, py, etc.). Sirven para ejecutar el servidor
			de la base de datos en desarrollo y otras utilidades para
			convertir documentos.</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			preproduccion</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Dispone de los directorios necesarios para hacer las pruebas
			previas al despliegue en producción</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			preproduccion/bdat</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Base de datos en preproducción</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			preproduccion/utilidades</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Script para ejecutar el servidor de preproduccion</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			documentos</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Documentos y guías para el usuario final</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			hsqldb</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Ficheros Java (.jar) para ejecutar el servidor de bases de datos
			HSQLDB.</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			Interfaz 
			</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Copias en producción de los interfaces .odb de usuarios para
			conectarse a la base de datos. Hay dos tipos de usuarios
			(tramitador y supervisor) con privilegios diferenciados por
			tablas.</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			macros 
			</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Macros BASIC de LibreOffice para importar en solo lectura por los
			interfaces de los usuarios.</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			plantillas 
			</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			Documentos .ott en producción.</p>
		</td>
	</tr>
	<tr valign="top">
		<td width="24%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0cm"><p>
			utilidades 
			</p>
		</td>
		<td width="76%" style="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0cm; padding-bottom: 0.1cm; padding-left: 0.1cm; padding-right: 0.1cm"><p>
			fichero bat para iniciar el servidor.</p>
		</td>
	</tr>
</table>
<h3 class="western">Documentos a proporcionar a la IA</h3>
<p>A la IA le debemos proporcionar los siguientes documentos para que
nos proporcione soporte y constituya una fuente de conocimiento. Los
documentos los generamos en desarrollo/documentos y con la utilidad
de conversión de .odt a .md los convertimos en el formato MarkDown
entendible por la IA.</p>
<p>Los documentos, su tipo y su procedencia, coómo se obtiene y
utilidad se listan a continuación:</p>
<table width="100%" cellpadding="2" cellspacing="0">
	<col width="34*"/>
	<col width="7*"/>
	<col width="43*"/>
	<col width="64*"/>
	<col width="64*"/>
	<col width="43*"/>
	<thead>
		<tr>
			<th width="13%" style="border: none; padding: 0cm"><p>NOMBRE</p>
			</th>
			<th width="3%" style="border: none; padding: 0cm"><p>TIPO</p>
			</th>
			<th width="17%" style="border: none; padding: 0cm"><p>PROCEDENCIA</p>
			</th>
			<th width="25%" style="border: none; padding: 0cm"><p>SCRIPT</p>
			</th>
			<th width="25%" style="border: none; padding: 0cm"><p>QUÉ HACE</p>
			</th>
			<th width="17%" style="border: none; padding: 0cm"><p>UTILIDAD</p>
			</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td width="13%" style="border: none; padding: 0cm"><p>bdat.script.txt</p>
			</td>
			<td width="3%" style="border: none; padding: 0cm"><p>SQL</p>
			</td>
			<td width="17%" style="border: none; padding: 0cm"><p>bdat.script</p>
			</td>
			<td width="25%" style="border: none; padding: 0cm"><p><code class="western">desarrollo/utilidades/limpia_script.py</code></p>
			</td>
			<td width="25%" style="border: none; padding: 0cm"><p>Se quitan
				las ordenes SQL tipo INSERT. Solicita con diálogo el .script a
				procesar y coloca el resultado donde elija el usuario<font face="Liberation Mono, monospace">.</font></p>
			</td>
			<td width="17%" style="border: none; padding: 0cm"><p>Conocer
				estructura base datos</p>
			</td>
		</tr>
		<tr>
			<td width="13%" style="border: none; padding: 0cm"><p>formularios_completo.json</p>
			</td>
			<td width="3%" style="border: none; padding: 0cm"><p>JSON</p>
			</td>
			<td width="17%" style="border: none; padding: 0cm"><p>*.odb</p>
			</td>
			<td width="25%" style="border: none; padding: 0cm"><p><code class="western">desarrollo/utilidades/extraer_formularios_v5.py</code></p>
			</td>
			<td width="25%" style="border: none; padding: 0cm"><p>Crea un json
				con los principales datos de formularios y controles. Solicita el
				fichero  .odb y crea la <font face="Source Sans Pro, sans-serif">salida
				en la misma ruta que el fichero odb</font>. Este script además
				descomprime el fichero .odb  en <font face="Source Sans Pro, sans-serif">_extract_*.odb
				en la misma ruta que el odb</font></p>
			</td>
			<td width="17%" style="border: none; padding: 0cm"><p>Conocer
				estructura de formularios, controles, eventos y propiedades de
				los archivos .odb</p>
			</td>
		</tr>
		<tr>
			<td width="13%" style="border: none; padding: 0cm"><p>NombreODB_modulos_consolidados.xml.txt</p>
			</td>
			<td width="3%" style="border: none; padding: 0cm"><p>XML</p>
			</td>
			<td width="17%" style="border: none; padding: 0cm"><p>desarrollo/interfaz/.odb</p>
			</td>
			<td width="25%" style="border: none; padding: 0cm"><p><code class="western">desarrollo/utilidades/consolidar_modulos_basic.py</code></p>
			</td>
			<td width="25%" style="border: none; padding: 0cm"><p>Se obtiene
				con el script dándole el fichero .odb y la ruta de salida en la
				linea de comando. El prefijo varía según el ODB proporcionado.</p>
			</td>
			<td width="17%" style="border: none; padding: 0cm"><p>Incluir el
				código fuente de las macros BASIC de LibreOffice en formato XML,
				legible por la IA</p>
			</td>
		</tr>
		<tr>
			<td width="13%" style="border: none; padding: 0cm"><p>Documentos.md</p>
			</td>
			<td width="3%" style="border: none; padding: 0cm"><p>MD</p>
			</td>
			<td width="17%" style="border: none; padding: 0cm"><p>desarrollo/documentos/*.odt</p>
			</td>
			<td width="25%" style="border: none; padding: 0cm"><p><code class="western">desarrollo/utilidades/ConvertidorODT-MD.bat</code></p>
			</td>
			<td width="25%" style="border: none; padding: 0cm"><p>Conversión
				de .odt a .md con la macro. Pide la ruta al odb y lo coloca
				directamente en desarrollo/documentos. Usa pandoc internamente</p>
			</td>
			<td width="17%" style="border: none; padding: 0cm"><p>Documentos
				de resumen de las directrices de desarrollo del proyecto así
				como explicaciones de la estructura de las bases de datos, la
				lógica de los procedimientos, etc.</p>
			</td>
		</tr>
		<tr>
			<td width="13%" style="border: none; padding: 0cm"><p>datos_maestros.sql.txt</p>
			</td>
			<td width="3%" style="border: none; padding: 0cm"><p>SQL</p>
			</td>
			<td width="17%" style="border: none; padding: 0cm"><p>desarrolo/bdat/bdat.script</p>
			</td>
			<td width="25%" style="border: none; padding: 0cm"><p><code class="western">desarrollo/utilidades/extraer_datos_maestros.py</code></p>
			</td>
			<td width="25%" style="border: none; padding: 0cm"><p>Extrae los
				datos INSERT de bdat.script de las tablas indicadas en
				fuentesIA/tablas_maestras.txt y lo coloca en
				fuentesIA/datos_maestros.sql.txt</p>
			</td>
			<td width="17%" style="border: none; padding: 0cm"><p>Conocer los
				datos que definen la lógica de negocio: TIPOS_EXPEDIENTES,
				TIPOS_SOLICITUDES, etc</p>
			</td>
		</tr>
		<tr>
			<td width="13%" style="border: none; padding: 0cm"><p>tablas_maestras.txt</p>
			</td>
			<td width="3%" style="border: none; padding: 0cm"><p>TXT</p>
			</td>
			<td width="17%" style="border: none; padding: 0cm"><p>Creada por
				el desarrollador</p>
			</td>
			<td width="25%" style="border: none; padding: 0cm"><p>manual</p>
			</td>
			<td width="25%" style="border: none; padding: 0cm"><p>Configuración
				del script extraer_datos_maestros.py</p>
			</td>
			<td width="17%" style="border: none; padding: 0cm"><p>Contiene las
				tablas de datos maestros, que definen el negocio de la base de
				datos.</p>
			</td>
		</tr>
	</tbody>
</table>
<p><br/>
<br/>

</p>
<p align="justify">El archivo JSON consolidado
(formularios_completo.json) sustituye a los múltiples archivos XML
de contenido (content.xml) y manifest.xml, proporcionando toda la
información de formularios en un formato más estructurado y
manejable.</p>
<p align="justify">Para mayor facilidad de uso se ha creado un script
bat donde mediante menú se puede ejecutar cualquiera de los scripts
anteriores: menu_utilidades_desarrollo.bat</p>
<h3 class="western">Proceso de iteración de desarrollo con la IA</h3>
<p align="justify">Para la ayuda desde la IA en el proceso de
desarrollo del proyecto, debo proporcionarle los archivos
actualizados a medida que avanzo. El proceso sigue este flujo:</p>
<p align="justify"><b>Ciclo de iteración:</b></p>
<p align="justify">Detecto necesidad → Le explico a la IA la
necesidad y me ayuda a resolverla según el contexto actual de
desarrollo → Realizo la implementación de la necesidad y la depuro
de forma interactiva hasta que quedo satisfecho → Actualizo los
ficheros pertinentes en las fuentes de la IA → Fin de iteración.</p>
<p align="justify"><b>Control de versiones:</b></p>
<p align="justify">El proyecto está bajo control de versiones Git.
Hago <i>commits</i> cuando hay cambios importantes consolidados. Esto
garantiza que puedo volver atrás si algo no funciona.</p>
<p align="justify"><b>Fases de desarrollo:</b></p>
<p align="justify">Esta forma de iterar con la IA para ir
desarrollando todo el sistema tiene cuatro fases:</p>
<ol>
	<li><p align="justify"><b>Fase 1 – Estructura de datos</b></p></li>
</ol>
<ul>
	<ul>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Definición de
		tablas maestras (tipos de datos estructurales)</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Tablas de
		datos operacionales de expedientes</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Sin lógica de
		negocio implementada (todo está permitido)</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Enfoque:
		consolidar estructura de BD paso a paso</p></li>
	</ul>
</ul>
<ol start="2">
	<li><p align="justify"><b>Fase 2 – Interfaz de usuario</b></p></li>
</ol>
<ul>
	<ul>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Formularios de
		introducción de datos</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Macros de
		ayuda (navegación, filtrado, plantillas, apertura documentos)</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Sin
		restricciones de lógica de negocio (el usuario controla qué
		hacer)</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Enfoque:
		consolidar interfaz funcional paso a paso</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Podría
		ponerse en producción al finalizar esta fase</p></li>
	</ul>
</ul>
<ol start="3">
	<li><p align="justify"><b>Fase 3 - Lógica de Negocio</b></p></li>
</ol>
<ul>
	<ul>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Definición de
		tablas que configuran la lógica de negocio</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Interfaz
		SUPERVISOR para gestionar esas tablas</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Macros de
		validación basadas en consultas (no hardcoded)</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm"><u>Despliegue
		progresivo</u> en producción de nuevas funcionalidades</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm"><u>IMPORTANTE</u>:
		Aquí sí requiere mayor control porque ya hay usuarios y datos
		reales</p></li>
	</ul>
</ul>
<ol start="4">
	<li><p align="justify">Fase 4 - Desarrollo continuo</p></li>
</ol>
<ul>
	<ul>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Mejoras y
		nuevas funcionalidades</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Base de datos
		en producción con usuarios activos</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Proceso de
		actualización y despliegue definido</p></li>
	</ul>
</ul>
<p align="justify"><b>Dependencias entre archivos fuente IA:</b></p>
<p align="justify">Cuando modifico algo, debo actualizar los archivos
correspondientes:</p>
<ul>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Cambio en
	estructura BD → Regenerar: `bdat.script.txt`,
	`formularios_completo.json`</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Cambio en
	macros → Regenerar: `NombreODB_modulos_consolidados.xml.txt`</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Cambio en datos
	maestros → Actualizar (si procede) `tablas_maestras.txt`→
	Regenerar: `datos_maestros.sql.txt`</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Cambio en
	formularios → Regenerar: `formularios_completo.json`</p></li>
</ul>
<h3 class="western">Proceso de despliegue en producción</h3>
<p align="justify">Para el despliegue en producción se necesitan
tenemos los siguientes recursos:</p>
<p align="justify">Servidores de bases de datos de producción,
preproducción y desarrollo. Los scripts se encuentran en sus
carpetas correspondientes. 
</p>
<ul>
	<li><p align="justify">Por definir</p></li>
</ul>
<h2 class="western">Lógica de la tramitación de expedientes</h2>
<p align="justify" style="line-height: 100%; margin-bottom: 0cm">Los
expedientes de solicitudes de instalaciones de alta tensión se
tramitan conforme a una normativa específica y mediante las reglas
establecidas en las leyes sectoriales y la ley de procedimiento
administrativo. Tras analizar los distintos tipos de procedimientos
se concluye que la tramitación tiene correlación con una serie de
conceptos: expediente, solicitud, proyecto, fase, trámite y tarea.</p>
<h3 class="western">Relación expediente, solicitud, proyecto, fase,
trámite y tarea</h3>
<p align="justify" style="line-height: 100%; margin-bottom: 0cm">Se
tramita un solo expediente cada vez, que dispone de un número único
(por mantener el historial el número usado no será el ID del
expediente en la base de datos, si no un número paralelo generado
desde un valor base tomado de otra base de datos existente). Cada
expediente tiene un proyecto asociado. Un proyecto puede tener
modificaciones siempre que no desvirtúen su esencia (finalidad).
Cada expediente puede tener diferentes solicitudes (autorización
administrativa previa, autorización administrativa de construcción,
etc.) sobre el mismo proyecto (o el proyecto con uno o más
modificados). Cada solicitud pasa por diferentes fases (ANÁLISIS
SOLICITUD, INFORMACIÓN PÚBLICA, CONSULTAS, etc.) aunque hay casos
en que puede haber más de una fase activa al mismo tiempo. Cada fase
puede tener uno o más trámites (por ejemplo la fase de información
pública puede tener el trámite de publicación en BOE y el trámite
de publicación en BOP) y cada trámite puede tener una o más tareas
(redactar anuncio, poner en firma, notificar, esperar plazo, etc.)</p>
<h3 class="western">Estructura de negocio de la tramitación</h3>
<p align="justify" style="line-height: 100%; margin-bottom: 0cm">En
nuestro caso queremos que la lógica de negocio no sea rígida,
restringiendo lo que se puede o no se puede hacer en cada solicitud,
fase, trámite, etc. de forma que no exista margen de maniobra para
el usuario en tomar decisiones dentro de lo posible. Deseamos que la
lógica sea definida de la siguiente forma:</p>
<ol>
	<li><p style="line-height: 100%; margin-bottom: 0cm">En cualquier
	estado o situación del expediente, es posible hacer cualquier cosa
	que no esté expresamente prohibida. En lugar de listar lo
	únicamente permitido, listar lo expresamente prohibido y permitir
	que se pueda hacer cualquier operación mientras no esté
	expresamente prohibida. Por ejemplo, una prohibición genérica
	sería que no se puede finalizar una fase si quedan trámites sin
	finalizar. Otra prohibición sería que no se puede iniciar la fase
	resolver si no se ha finalizado la fase análisis solicitud)</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Las
	prohibiciones que definen la lógica de la tramitación ha de
	obtenerse de valores definidos en tablas, no internamente escrito en
	el código. De esta forma la modificación de un precepto legal  (y
	por tanto la lógica del procedimiento) no requiere modificar macros
	si no que solo requiere modificar los datos de las prohibiciones del
	procedimiento. Esto hace que el sistema se adapte rápidamente a los
	cambios.</p></li>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm">Datos estructurales
vs datos 
</p>
<h3 class="western">Lógica de Negocio - Enfoque basado en Motor de
Reglas</h3>
<h4 class="western">Principio fundamental</h4>
<p style="line-height: 100%; margin-bottom: 0cm">La lógica de
negocio de la aplicación <b>NO se implementa mediante código duro</b>
(funciones, procedimientos almacenados, triggers con lógica
específica). En su lugar, se basa en un <b>motor de reglas genérico</b>
alimentado por tablas de configuración.</p>
<h4 class="western">Características del sistema de reglas</h4>
<ol>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Las reglas
	viven en tablas, no en código</p></li>
</ol>
<ul>
	<ul>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Toda la lógica
		de validación, restricción y flujo se almacena como datos en
		tablas específicas 
		</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Modificar el
		comportamiento del sistema implica modificar registros en estas
		tablas, no recompilar código 
		</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Las reglas son
		versionables, auditables y reversibles como cualquier otro dato 
		</p></li>
	</ul>
</ul>
<ol start="2">
	<li><p style="line-height: 100%; margin-bottom: 0cm">Las reglas leen
	valores de tablas estructurales</p></li>
</ol>
<ul>
	<ul>
		<li><p style="line-height: 100%; margin-bottom: 0cm">El motor de
		reglas consulta dinámicamente los datos de las tablas de
		estructura básica (FASES, SOLICITUDES, EXPEDIENTES, PROYECTOS,
		etc.) 
		</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Las reglas
		evalúan condiciones basándose en: 
		</p></li>
	</ul>
</ul>
<ul>
	<ul>
		<ul>
			<li><p style="line-height: 100%; margin-bottom: 0cm">Valores de
			campos específicos (ej: EXITO de una fase) 
			</p></li>
			<li><p style="line-height: 100%; margin-bottom: 0cm">Existencia o
			ausencia de registros relacionados 
			</p></li>
			<li><p style="line-height: 100%; margin-bottom: 0cm">Relaciones
			entre entidades 
			</p></li>
			<li><p style="line-height: 100%; margin-bottom: 0cm">Contexto del
			expediente (tipo, instrumento ambiental, etc.) 
			</p></li>
		</ul>
	</ul>
</ul>
<ol start="3">
	<li><p style="line-height: 100%; margin-bottom: 0cm">Las reglas
	producen acciones. Las reglas pueden generar diferentes tipos de
	acciones:</p></li>
</ol>
<ul>
	<ul>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Bloquear:
		Impedir al usuario realizar una acción (ej: crear una fase fuera
		de secuencia) 
		</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Sugerir:
		Mostrar advertencias o recomendaciones sin impedir la acción 
		</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Obligar:
		Forzar la creación/modificación de registros según condiciones 
		</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Calcular:
		Derivar valores automáticamente basándose en otros datos 
		</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Validar:
		Verificar la consistencia de los datos antes de confirmar cambios 
		</p></li>
	</ul>
</ul>
<ol start="4">
	<li><p style="line-height: 100%; margin-bottom: 0cm">Las reglas son
	editables sin tocar código</p></li>
</ol>
<ul>
	<ul>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Los usuarios
		con permisos adecuados pueden modificar las reglas de negocio 
		</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">No se requiere
		intervención de programadores para ajustar el comportamiento del
		sistema 
		</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Los cambios en
		las reglas tienen efecto inmediato 
		</p></li>
		<li><p style="line-height: 100%; margin-bottom: 0cm">Esto permite
		adaptación ágil a cambios normativos o procedimentales 
		</p></li>
	</ul>
</ul>
<h4 class="western">Implicaciones para el diseño actual</h4>
<p style="line-height: 100%; margin-bottom: 0cm"><b>Fase de
desarrollo/despliegue (Fases 1 y 2)</b></p>
<ul>
	<li><p style="line-height: 100%; margin-bottom: 0cm"><b>Sin
	restricciones activas</b>: El usuario tiene libertad total 
	</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm"><b>Indicadores
	visuales</b>: La interfaz muestra advertencias informativas (no
	bloqueantes) sobre datos incompletos o inconsistentes 
	</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm"><b>Educación
	progresiva</b>: Los usuarios se familiarizan con el &quot;debería
	ser&quot; antes de que se active el &quot;debe ser&quot; 
	</p></li>
</ul>
<p style="line-height: 100%; margin-bottom: 0cm"><b>Fase de
producción con lógica activada (fases 3 y 4)</b></p>
<ul>
	<li><p style="line-height: 100%; margin-bottom: 0cm"><b>Restricciones
	automáticas</b>: El motor de reglas evalúa y aplica las reglas
	definidas 
	</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm"><b>Flujos
	guiados</b>: El sistema sugiere o impone el siguiente paso según el
	contexto 
	</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm"><b>Validación
	en tiempo real</b>: Se previenen inconsistencias antes de que se
	confirmen 
	</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm"><b>Flexibilidad
	mantenida</b>: Ajustar una regla no requiere nueva versión de
	software 
	</p></li>
</ul>
<h4 class="western">Principio de no redundancia</h4>
<p style="line-height: 100%; margin-bottom: 0cm">Los datos
estructurales (como EXITO en FASES) <b>no duplican información</b>
que pueda deducirse de otros datos. El motor de reglas es responsable
de:</p>
<ul>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Interpretar los
	datos básicos 
	</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Aplicar las
	reglas configuradas 
	</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Producir las
	acciones correspondientes 
	</p></li>
</ul>
<p style="line-height: 100%; margin-bottom: 0cm">Los campos
estructurales contienen <b>únicamente información primaria</b>,
nunca derivada.</p>
<h3 class="western">El expediente y sus tipos</h3>
<p style="line-height: 100%; margin-bottom: 0cm">Los tipos de
expedientes se definen en la tabla maestra TIPOS_EXPEDIENTES. Como se
puede apreciar está asociado al tipo de titular de la instalación y
tipo de uso de la misma. Digamos que es una clasificación de las
distintas particularidades que tiene la legislación respecto a la
tramitación en cada caso. El tipo de expediente define la lógica de
la tramitación pues será una de las variables a tener en cuenta de
cara a definir las restricciones o prohibiciones de la lógica de
negocio. 
</p>
<p style="line-height: 100%; margin-bottom: 0cm">El número de
expediente NUMERO_AT es el <b>nexo que une todo</b> lo relativo a ese
expediente.</p>
<p style="line-height: 100%; margin-bottom: 0cm">El responsable ID es
la persona que es responsable de ese expediente por completo y en la
estructura empresarial es la única persona que está “permitida”
(en el sentido que el sistema no impide a otro usuario actuar sobre
ese expediente) a actuar sobre es expedientes y todas las tablas y
datos asociadas. 
</p>
<p style="line-height: 100%; margin-bottom: 0cm">El campo HEREDADO
indica que ese expediente viene heredado del sistema de tramitación
anterior. Esto indica que solo tendrá como datos en tablas lo que ya
existe en el sistema anterior de control, pero no tendrá todas las
tablas normales de un expediente moderno. De esta forma si este campo
es SI, la lógica de negocio y el usuario están informados de porqué
no hay datos en muchas tablas.</p>
<h3 class="western">La solicitud y sus tipos</h3>
<p style="line-height: 100%; margin-bottom: 0cm">Los tipos de
solicitudes TIPO_SOLICITUD_ID están claramente definidas en la
legislación y definen el resultado buscado por el solicitante. En
cualquier caso siempre se pide un resultado de la misma desde el
solicitante/peticionario/titular. Si no se obtiene el resultado
esperado se produce una resolución de denegación, inadmisión,
caducidad, aceptación renuncia, etc. para finalizar la solicitud.
Una solicitud siempre (si no fuese así deberíamos plantearnos
sacarla fuera de estos tipos de solicitudes) termina con una fase
resolución. La situación en la que se encuentra una solicitud
depende de lo que hayan concluido sus fases. Con macros se puede
crear un “estado” como conjunción de los distintos estados de
cada fase/trámite/tarea.</p>
<p style="line-height: 100%; margin-bottom: 0cm">El campo FECHA es la
fecha de la solicitud.</p>
<p style="line-height: 100%; margin-bottom: 0cm">El campo PROYECTO_ID
es la referencia al proyecto principal que se acompaña en la primera
solicitud.</p>
<p style="line-height: 100%; margin-bottom: 0cm">Hay tipos de
solicitudes que se refieren a otras solicitudes que que hacen aquella
se finalice. Estas son DESISTIMIENTO y RENUNCIA. EL parámetro que
las une es el campo SOLICITUD_AFECTADA_ID que es NULL por defecto
para cualquier resolución, pero con la lógica de negocio será
obligatorio dar un valor eligiendo la solicitud que se renuncia o
desiste.</p>
<h3 class="western">La fase y sus tipos</h3>
<p style="line-height: 100%; margin-bottom: 0cm">Hay diferentes tipos
de fases, muchas de ellas son comunes a los distintos tipos de
solicitudes. Los tipos de fases se definen en la tabla TIPOS_FASES.
La característica principal de una fase es que tiene fechas de
inicio y fin y que tiene un resultado de la misma. Una fase es un
conjunto de trámites para obtener un requisito para alcanzar el
objetivo de la solicitud. Por ejemplo obtención del pronunciamiento
ambiental, de los condicionantes de los organismos, de la exposición
del proyecto en información pública o de un informe favorable de un
organismo externo. 
</p>
<p style="line-height: 100%; margin-bottom: 0cm">Resumen de conceptos
y flujo de trabajo con el diseño simplificado de fases. 
</p>
<p style="line-height: 100%; margin-bottom: 0cm"><b>Conceptos clave:</b></p>
<p style="line-height: 100%; margin-bottom: 0cm"><b>Tabla FASES</b>:
cada fase del expediente tiene campos clave:</p>
<ul>
	<li><p style="line-height: 100%; margin-bottom: 0cm">ID de fase, ID
	de solicitud, tipo de fase, fecha de inicio, fecha de fin,
	observaciones.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Fecha de fin se
	define como la última fecha de finalización de todos los trámites
	asociados.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">EXITO: Es el
	valor booleano del resultado exitoso de la fase. Si es SI, la fase
	ha concluido exitosamente respecto a su tipo. Por ejemplo si la fase
	es INFORME MINISTERIO entonces se ha obtenido el informe favorable.
	Ese informe estará en el trámite/tarea correspondiente.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">DOCUMENTO_RESULTADO_ID:
	posible vínculo al documento oficial generado. Posiblemente
	desaparezca.</p></li>
</ul>
<p style="line-height: 100%; margin-bottom: 0cm"><b>Rellenado y
flujo</b>:</p>
<ul>
	<li><p style="line-height: 100%; margin-bottom: 0cm">La fecha fin de
	la fase debe ser rellenada manualmente por el usuario autorizado. En
	fases posteriores del desarrollo, se podrá añadir una sugerencia
	automática basada en la fecha del último trámite cerrado, pero
	nunca será obligatoria ni se aplicará automáticamente.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">El éxito o no
	de la fase debe ser registrado manualmente por el usuario autorizado
	una vez analizada la documentación oficial correspondiente.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Si EXITO es
	nulo, la fase está en curso o pendiente de cierre administrativo.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Al tener el
	valor de éxito relleno (SI/NO) la fase se considera concluida y se
	puede permitir la creación o activación de fases sucesivas según
	reglas de negocio.</p></li>
</ul>
<p style="line-height: 100%; margin-bottom: 0cm"><b>Reglas de negocio
y validación</b>:</p>
<ul>
	<li><p style="line-height: 100%; margin-bottom: 0cm">La fase sólo
	puede cerrarse tras completarse todos los trámites.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">La elección
	del resultado condiciona el flujo posterior y la posibilidad de
	nuevas fases.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Campos
	automatizados (fecha fin) y campos manuales (éxito) coexistente
	para flexibilidad y control.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Este diseño
	permite una gestión clara de la tramitación administrativa,
	manteniendo integridad, auditabilidad y control sobre el proceso
	mediante restricciones racionales y roles de usuario.</p></li>
</ul>
<h3 class="western">El trámite y sus tipos</h3>
<p style="line-height: 100%; margin-bottom: 0cm">Los trámites son la
capa de nuestro sistema con mayor variabilidad. Esto hace que
necesitemos una estructura flexible pero coherente. La solución
adoptada es la siguiente:</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm"><b>Tablas
necesarias</b>: para conseguir el objetivo</p>
<ul>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Una tabla
	general de TIPOS_TRAMITES donde se listen todos los tipos y se
	incluya el nombre de la tabla asociada al tipo.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Una tabla
	TRAMITES general que contenga los datos comunes a todos los tipos de
	trámites. Contiene instancias.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Una tabla
	TRAMITES_XXXXXX por cada tipo con los campos específicos de ese
	tipo de trámite. Contiene instancias.</p></li>
</ul>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm"><b>Implicaciones de
la solución adoptada</b>: consecuencias de la solución</p>
<ul>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Hay una
	relación uno a uno entre el nombre de la tabla específica para un
	tipo de trámite y el tipo en si en la tabla TIPOS_TRAMITES. Si esa
	relación se rompe se emitiría un error.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Las instancias
	en TRAMITES tienen que tener una instancia en la tabla de trámite
	especializado, correspondiente al valor del tipo de trámite.</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Existe el
	riesgo de instancias de trámites especializados huérfanos sin
	entrada en TRAMITES e instancias en TRAMITES sin su hijo
	correspondiente. 
	</p></li>
</ul>
<p style="line-height: 100%; margin-bottom: 0cm">Estos riesgos se
deben gobernar con dependencias en cascada y macros de comprobación.
Esto no es una regla de la lógica de negocio, es un asunto de
integridad referencial. 
</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm"><strong><b>Ventajas</b></strong><strong><span style="font-weight: normal">:
lo que nos ofrece</span></strong></p>
<ul>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Integridad de
	datos fuerte 
	</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Consultas SQL
	estándar 
	</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Fácil validar
	datos específicos 
	</p></li>
</ul>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm"><strong><b>Desventajas</b></strong><strong><span style="font-weight: normal">:
lo que nos complica</span></strong></p>
<ul>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Más tablas que
	mantener 
	</p></li>
	<li><p style="line-height: 100%; margin-bottom: 0cm">Requiere
	modificar BD al añadir nuevos tipos</p></li>
</ul>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm"><b>Estructura
propuesta</b>: por confirmar</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">TIPOS_TRAMITES
(tabla maestra)</p>
<p style="line-height: 100%; margin-bottom: 0cm">    - ID</p>
<p style="line-height: 100%; margin-bottom: 0cm">    - CODIGO</p>
<p style="line-height: 100%; margin-bottom: 0cm">    - NOMBRE</p>
<p style="line-height: 100%; margin-bottom: 0cm">    - DESCRIPCION</p>
<p style="line-height: 100%; margin-bottom: 0cm">    -
TABLA_EXTENSION (nombre de la tabla especializada, ej:
&quot;TRAMITES_REQUERIMIENTO&quot;)</p>
<p style="line-height: 100%; margin-bottom: 0cm">   
</p>
<p style="line-height: 100%; margin-bottom: 0cm">TRAMITES (tabla
base)</p>
<p style="line-height: 100%; margin-bottom: 0cm">    - ID</p>
<p style="line-height: 100%; margin-bottom: 0cm">    - FASE_ID (FK →
FASES)</p>
<p style="line-height: 100%; margin-bottom: 0cm">    -
TIPO_TRAMITE_ID (FK → TIPOS_TRAMITES)</p>
<p style="line-height: 100%; margin-bottom: 0cm">    - FECHA_INICIO</p>
<p style="line-height: 100%; margin-bottom: 0cm">    - FECHA_FIN</p>
<p style="line-height: 100%; margin-bottom: 0cm">    - OBSERVACIONES</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm">TRAMITES_[TIPO_ESPECIFICO]
(una tabla por cada tipo)</p>
<p style="line-height: 100%; margin-bottom: 0cm">    - TRAMITE_ID (PK
+ FK → TRAMITES, relación 1:1)</p>
<p style="line-height: 100%; margin-bottom: 0cm">    - [campos
específicos del tipo de trámite]</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
</body>
</html>